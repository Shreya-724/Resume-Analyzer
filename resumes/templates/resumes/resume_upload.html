{% extends 'resumes/base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow fade-in">
            <div class="card-header text-center py-4">
                <h3 class="mb-0"><i class="fas fa-cloud-upload-alt me-2"></i>Upload Your Resume</h3>
                <p class="text-muted mb-0">Let AI find the perfect job matches for you</p>
            </div>
            <div class="card-body p-5">
                <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                    {% csrf_token %}
                    
                    <div class="text-center mb-5">
                        <label for="{{ form.file.id_for_label }}" class="custom-file-upload">
                            <i class="fas fa-file-pdf"></i>
                            <h5 class="mt-3">Drag & Drop or Click to Upload</h5>
                            <p class="text-muted">Supported formats: PDF, DOCX, TXT (Max 5MB)</p>
                            <span class="btn btn-primary mt-2">Choose File</span>
                        </label>
                        {{ form.file }}
                        {% if form.file.errors %}
                        <div class="invalid-feedback d-block text-center mt-3">
                            {% for error in form.file.errors %}
                            <i class="fas fa-exclamation-circle me-1"></i>{{ error }}
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg py-3">
                            <i class="fas fa-bolt me-2"></i>Analyze Resume
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="row mt-5">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>How It Works</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-upload fa-2x"></i>
                                </div>
                                <h6>1. Upload Resume</h6>
                                <p class="text-muted small">Upload your resume in any supported format</p>
                            </div>
                            <div class="col-md-3 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-cogs fa-2x"></i>
                                </div>
                                <h6>2. AI Analysis</h6>
                                <p class="text-muted small">Our AI extracts skills and experience</p>
                            </div>
                            <div class="col-md-3 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-search fa-2x"></i>
                                </div>
                                <h6>3. Smart Matching</h6>
                                <p class="text-muted small">We match you with relevant job opportunities</p>
                            </div>
                            <div class="col-md-3 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-briefcase fa-2x"></i>
                                </div>
                                <h6>4. Get Hired</h6>
                                <p class="text-muted small">Find your dream job faster</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.getElementById('{{ form.file.id_for_label }}');
        const fileUploadLabel = document.querySelector('.custom-file-upload');
        
        // Style the file input
        fileInput.classList.add('d-none');
        
        // Update label when file is selected
        fileInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                fileUploadLabel.innerHTML = `
                    <i class="fas fa-file text-success"></i>
                    <h5 class="mt-3">${this.files[0].name}</h5>
                    <p class="text-muted">Ready to analyze!</p>
                    <span class="btn btn-outline-secondary mt-2">Change File</span>
                `;
            }
        });
        
        // Allow drag and drop
        fileUploadLabel.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('bg-light');
        });
        
        fileUploadLabel.addEventListener('dragleave', function() {
            this.classList.remove('bg-light');
        });
        
        fileUploadLabel.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('bg-light');
            fileInput.files = e.dataTransfer.files;
            fileInput.dispatchEvent(new Event('change'));
        });
    });
</script>
{% endblock %}